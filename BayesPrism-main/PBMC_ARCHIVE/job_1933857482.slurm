#!/bin/bash

# SLURM job submission script generated by Apache Airavata
#SBATCH -p RM-shared
#SBATCH -N 1
#SBATCH -n 10
#SBATCH --mail-user=scigap03jobs@scigap.org
#SBATCH -A bio220040p
#SBATCH -t 5:0:00
#SBATCH -J A1888369228
#SBATCH -o /ocean/projects/bio220040p/dreg2016/temp_project/PROCESS_d5e1c12d-caf7-418a-9715-e8daaa4f7ab1/BayesPrism.stdout
#SBATCH -e /ocean/projects/bio220040p/dreg2016/temp_project/PROCESS_d5e1c12d-caf7-418a-9715-e8daaa4f7ab1/BayesPrism.stderr

#SBATCH --mail-type=ALL

#SBATCH -p RM-shared
#SBATCH --mem=60G
#SBATCH -t 12:00:00
#SBATCH -n 32
#SBATCH -A  bio220040p
cd /ocean/projects/bio220040p/dreg2016/temp_project/PROCESS_d5e1c12d-caf7-418a-9715-e8daaa4f7ab1
curl -X POST -H "Content-Type: application/vnd.kafka.json.v2+json" -H "Accept: application/vnd.kafka.v2+json" --data '{"records":[{"value":{"jobName":"A1888369228", "status":"RUNNING", "task":"TASK_11bf54d4-8ca8-43be-a689-0cb48dc6f54b"}}]}' "http://scigap03.sciencegateways.iu.edu:8082/topics/helix-airavata-mq" > /dev/null || true
/ocean/projects/bio210011p/dreg2016/BayesPrism-gateway/run_bayes.bsh -x Fig2b-WholeBlood_RNAseq.tsv -x.type tsv -ref Fig2ab-NSCLC_PBMCs_scRNAseq_refsample.tsv -ref.file.type tsv -ref.data.type scRNA -file.cell.type PBMCref_cellprofile.csv -species hs -out out 
curl -X POST -H "Content-Type: application/vnd.kafka.json.v2+json" -H "Accept: application/vnd.kafka.v2+json" --data '{"records":[{"value":{"jobName":"A1888369228", "status":"COMPLETED", "task":"TASK_11bf54d4-8ca8-43be-a689-0cb48dc6f54b"}}]}' "http://scigap03.sciencegateways.iu.edu:8082/topics/helix-airavata-mq" > /dev/null || true

