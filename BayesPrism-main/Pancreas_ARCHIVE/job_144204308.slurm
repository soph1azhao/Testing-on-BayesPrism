#!/bin/bash

# SLURM job submission script generated by Apache Airavata
#SBATCH -p RM-shared
#SBATCH -N 1
#SBATCH -n 10
#SBATCH --mail-user=scigap03jobs@scigap.org
#SBATCH -A bio220040p
#SBATCH -t 5:0:00
#SBATCH -J A1378164777
#SBATCH -o /ocean/projects/bio220040p/dreg2016/temp_project/PROCESS_6e1df479-cdc3-4e85-914d-1c4d16190a68/BayesPrism.stdout
#SBATCH -e /ocean/projects/bio220040p/dreg2016/temp_project/PROCESS_6e1df479-cdc3-4e85-914d-1c4d16190a68/BayesPrism.stderr

#SBATCH --mail-type=ALL

#SBATCH -p RM-shared
#SBATCH --mem=60G
#SBATCH -t 12:00:00
#SBATCH -n 32
#SBATCH -A  bio220040p
cd /ocean/projects/bio220040p/dreg2016/temp_project/PROCESS_6e1df479-cdc3-4e85-914d-1c4d16190a68
curl -X POST -H "Content-Type: application/vnd.kafka.json.v2+json" -H "Accept: application/vnd.kafka.v2+json" --data '{"records":[{"value":{"jobName":"A1378164777", "status":"RUNNING", "task":"TASK_3c4d06d4-cec8-4129-8e10-822eff09ab36"}}]}' "http://scigap03.sciencegateways.iu.edu:8082/topics/helix-airavata-mq" > /dev/null || true
/ocean/projects/bio210011p/dreg2016/BayesPrism-gateway/run_bayes.bsh -x pancreas_bulk_v2.tsv -x.type tsv -ref pancreas_scref_v2.tsv -ref.file.type tsv -ref.data.type scRNA -file.cell.type pancreasref_cellprofile.csv -species hs -out out 
curl -X POST -H "Content-Type: application/vnd.kafka.json.v2+json" -H "Accept: application/vnd.kafka.v2+json" --data '{"records":[{"value":{"jobName":"A1378164777", "status":"COMPLETED", "task":"TASK_3c4d06d4-cec8-4129-8e10-822eff09ab36"}}]}' "http://scigap03.sciencegateways.iu.edu:8082/topics/helix-airavata-mq" > /dev/null || true

